% Remember to use the lgrind style

\Head{}
\File{getData.cpp}{2016}{12}{6}{13:28}{2265}
\L{\LB{\K{\#include}_\S{}\3lab.h\3\SE{}}}
\L{\LB{\K{const}_\V{string}_\V{js}_=_\S{}\3Accept:_application/json\3\SE{};}}
\L{\LB{\K{const}_\V{string}_\V{key}_=_}}
\L{\LB{\S{}\3X\-Mashape\-Key:_q9bHltcHV2mshsWdmYro91TZDWyCp1vFXk8jsnHs80kSDWR3Co\3\SE{};}}
\L{\LB{}}
\index{handleData}\Proc{handleData}\L{\LB{\V{size\_t}_\V{handleData}(\K{void}*_\V{ptr},_\V{size\_t}_\V{size},_\V{size\_t}_\V{nmemb},_\K{void}*_\V{g})}}
\L{\LB{\{}}
\L{\LB{}\Tab{4}{*(\K{static\_cast}\<\V{string}*\>(\V{g}))_+=_(\K{static\_cast}\<\K{char}*\>(\V{ptr}));}}
\L{\LB{}\Tab{4}{\K{return}_\V{size}_*_\V{nmemb};}}
\L{\LB{\}}}
\L{\LB{}}
\index{write\_data}\Proc{write\_data}\L{\LB{\V{size\_t}_\V{write\_data}(\K{void}_*\V{ptr},_\V{size\_t}_\V{size},_\V{size\_t}_\V{nmemb},_\V{FILE}_*\V{stream})}}
\L{\LB{\{}}
\L{\LB{}\Tab{4}{\V{size\_t}_\V{written}_=_\V{fwrite}(\V{ptr},_\V{size},_\V{nmemb},_\V{stream});}}
\L{\LB{}\Tab{4}{\K{return}_\V{written};}}
\L{\LB{\}}}
\L{\LB{}}
\index{getData}\Proc{getData}\L{\LB{\V{list}\<\V{Card}\>_\V{getData}(\V{string}_\V{query},_\V{string}_\V{endpoint})}}
\L{\LB{\{}}
\L{\LB{}\Tab{4}{\V{list}\<\V{Card}\>_\V{cardlist};}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\V{string}_\V{search}_=_\S{}\3https://omgvamp\-hearthstone\-v1.p.mashape.com/cards/\3\SE{};}}
\L{\LB{}\Tab{4}{\V{search}_=_\V{search}_+_\V{endpoint}_+_\S{}\3/\3\SE{};}}
\L{\LB{}\Tab{4}{\K{while}_(\V{query}.\V{find}(\S{}\3_\3\SE{})!=\V{string::npos})}}
\L{\LB{}\Tab{8}{\V{query}.\V{replace}(\V{query}.\V{find}(\S{}\3_\3\SE{}),_\N{1},_\S{}\3\%20\3\SE{});}}
\L{\LB{}\Tab{4}{\V{search}_=_\V{search}_+_\V{query}_+_\S{}\3?collectible=1\3\SE{};}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\K{struct}_\V{curl\_slist}_*\V{slist1}_=_\V{NULL};}}
\L{\LB{}\Tab{4}{\V{slist1}_=_\V{curl\_slist\_append}(\V{slist1},_\V{js}.\V{c\_str}());}}
\L{\LB{}\Tab{4}{\V{slist1}_=_\V{curl\_slist\_append}(\V{slist1},_\V{key}.\V{c\_str}());}}
\L{\LB{}}
\L{\LB{}\Tab{4}{\V{FILE}_*\V{carddata};}}
\L{\LB{}\Tab{4}{\V{CURL}*_\V{curl}_=_\V{curl\_easy\_init}();}}
\L{\LB{}\Tab{4}{\K{if}_(\V{curl})_\{}}
\L{\LB{}\Tab{8}{\V{carddata}_=_\V{fopen}(\S{}\3carddb.txt\3\SE{},\S{}\3wb\3\SE{});}}
\L{\LB{}\Tab{8}{\V{curl\_easy\_setopt}(\V{curl},_\V{CURLOPT\_URL},_\V{search}.\V{c\_str}());}}
\L{\LB{}\Tab{8}{\V{curl\_easy\_setopt}(\V{curl},\V{CURLOPT\_HTTPHEADER},_\V{slist1});}}
\L{\LB{}\Tab{8}{\V{curl\_easy\_setopt}(\V{curl},_\V{CURLOPT\_WRITEFUNCTION},_\V{write\_data});}}
\L{\LB{}\Tab{8}{\V{curl\_easy\_setopt}(\V{curl},_\V{CURLOPT\_WRITEDATA},_\V{carddata});}}
\L{\LB{}\Tab{8}{\V{curl\_easy\_perform}(\V{curl});}}
\L{\LB{}\Tab{8}{\V{curl\_easy\_cleanup}(\V{curl});}}
\L{\LB{}\Tab{8}{\V{fclose}(\V{carddata});}}
\L{\LB{}\Tab{4}{\}}}
\L{\LB{}}
\L{\LB{}\Tab{4}{\V{ifstream}_\V{ifs}_(\S{}\3carddb.txt\3\SE{});}\Tab{36}{}}
\L{\LB{}\Tab{4}{\V{json}_\V{ji}_=_\V{json::parse}(\V{ifs});}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}\Tab{4}{\K{for}_(\K{int}_\V{i}_=_\N{0};_\V{i}_\<_\V{ji}.\V{size}();_\V{i}++)}}
\L{\LB{}\Tab{4}{\{}}
\L{\LB{}\Tab{8}{\V{Card}_\V{card};}}
\L{\LB{}\Tab{8}{\K{if}_(!\V{ji}[\V{i}][\S{}\3name\3\SE{}].\V{is\_null}())_\V{card}.\V{name}_=_\V{ji}[\V{i}][\S{}\3name\3\SE{}];}}
\L{\LB{}\Tab{8}{\K{if}_(!\V{ji}[\V{i}][\S{}\3cardSet\3\SE{}].\V{is\_null}())_\V{card}.\V{cardSet}_=_\V{ji}[\V{i}][\S{}\3cardSet\3\SE{}];}}
\L{\LB{}\Tab{8}{\K{if}_(!\V{ji}[\V{i}][\S{}\3type\3\SE{}].\V{is\_null}())_\V{card}.\V{type}_=_\V{ji}[\V{i}][\S{}\3type\3\SE{}];}}
\L{\LB{}\Tab{8}{\K{if}_(!\V{ji}[\V{i}][\S{}\3text\3\SE{}].\V{is\_null}())_\V{card}.\V{text}_=_\V{ji}[\V{i}][\S{}\3text\3\SE{}];}}
\L{\LB{}\Tab{8}{\K{if}_(!\V{ji}[\V{i}][\S{}\3playerClass\3\SE{}].\V{is\_null}())}}
\L{\LB{}\Tab{12}{\V{card}.\V{playerClass}_=_\V{ji}[\V{i}][\S{}\3playerClass\3\SE{}];}}
\L{\LB{}\Tab{8}{\K{if}_(!\V{ji}[\V{i}][\S{}\3race\3\SE{}].\V{is\_null}())_\V{card}.\V{race}_=_\V{ji}[\V{i}][\S{}\3race\3\SE{}];}}
\L{\LB{}\Tab{8}{\K{if}_(!\V{ji}[\V{i}][\S{}\3img\3\SE{}].\V{is\_null}())_\V{card}.\V{img}_=_\V{ji}[\V{i}][\S{}\3img\3\SE{}];}}
\L{\LB{}\Tab{8}{\K{if}_(!\V{ji}[\V{i}][\S{}\3health\3\SE{}].\V{is\_null}())_\V{card}.\V{health}_=_\V{ji}[\V{i}][\S{}\3health\3\SE{}];}}
\L{\LB{}\Tab{8}{\K{if}_(!\V{ji}[\V{i}][\S{}\3attack\3\SE{}].\V{is\_null}())_\V{card}.\V{attack}_=_\V{ji}[\V{i}][\S{}\3attack\3\SE{}];}}
\L{\LB{}\Tab{8}{\K{if}_(!\V{ji}[\V{i}][\S{}\3durability\3\SE{}].\V{is\_null}())_}}
\L{\LB{}\Tab{12}{\V{card}.\V{durability}_=_\V{ji}[\V{i}][\S{}\3durability\3\SE{}];}}
\L{\LB{}\Tab{8}{\K{if}_(!\V{ji}[\V{i}][\S{}\3cost\3\SE{}].\V{is\_null}())_\V{card}.\V{cost}_=_\V{ji}[\V{i}][\S{}\3cost\3\SE{}];}}
\L{\LB{}\Tab{8}{\V{card}.\V{fit}_=_\N{0};}}
\L{\LB{}\Tab{8}{\V{cardlist}.\V{push\_back}(\V{card});}}
\L{\LB{}\Tab{4}{\}}}
\L{\LB{}\Tab{4}{}}
\L{\LB{}}
\L{\LB{}\Tab{4}{\K{return}_\V{cardlist};}}
\L{\LB{\}}}
